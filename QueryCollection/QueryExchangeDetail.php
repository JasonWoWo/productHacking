<?php
/**
 * Created by PhpStorm.
 * User: wangxionghao
 * Date: 16/6/21
 * Time: 下午2:32
 */

namespace QueryCollection;

require __DIR__ . '/../Bootstrap.php';

use MiddlewareSpace\ExchangerQuery;

class QueryExchangeDetail extends ExchangerQuery
{
    public function exchangerDetail($argv = array())
    {
        $pointDate = new \DateTime();
        if (!empty($argv)) {
            $pointDate = new \DateTime(strtotime($argv[1]));
        }
        $this->getDailyRegisters($pointDate);
        $this->getExtraDetail();
        foreach ($this->exchangers as $registerDetail) {
            $maxBirthCnt = $registerDetail['birthcnt'] >= $registerDetail['backUpBirths'] ? $registerDetail['birthcnt'] : $registerDetail['backUpBirths'];
            echo sprintf("%s;%s;%s;%s \n", $registerDetail['id'], $registerDetail['udid'], $registerDetail['authorize'], $maxBirthCnt);
        }
    }

    /**
     * 蛋糕订单是否受短信影响
     */
    public function getOrderDetailPoint()
    {
        $orderDetails = $this->getOrderUidDetail($this->getOrderItems());
        echo "orderId;id;phone;create_on;visit_on;active_send;push_send \n";
        foreach ($orderDetails as $detail) {
            echo "{$detail['orderId']};{$detail['id']};{$detail['phone']};{$detail['create_on']};{$detail['visit_on']};{$detail['active_send']};{$detail['push_send']} \n";
        }
    }

    public function getOrderItems()
    {
        return array(
            22387639,
            22389418,
            22389549,
            22390025,
            22390038,
            22390044,
            22390513,
            22390906,
            22391054,
            22389501,
            22389122,
            22387828,
            22390096,
            22390657,
            22389677,
            22390359,
            22389192,
            22388030,
            22389475,
            22389778,
            22389867,
            22388971,
            22389597,
            22391017,
            22390020,
            22388326,
            22390207,
            22390230,
            22390228,
            22387512,
            22388607,
            22388718,
            22388729,
            22389015,
            22389166,
            22389343,
            22389493,
            22389770,
            22389655,
            22390552,
            22390965,
            22389731,
            22388029,
            22389297,
            22388987,
            22390865,
            22390888,
            22390422,
            22391012,
            22389222,
            22389281,
            22389403,
            22387482,
            22387624,
            22388042,
            22388358,
            22390609,
            22391080,
            22388214,
            22388351,
            22388589,
            22387532,
            22388434,
            22388518,
            22389134,
            22389743,
            22387877,
            22389240,
            22389967,
            22390997,
            22388945,
            22389545,
            22389769,
            22388039,
            22388165,
            22388363,
            22390216,
            22390321,
            22388296,
            22388741,
            22389412,
            22389669,
            22390043,
            22390235,
            22387825,
            22387894,
            22390078,
            22390295,
            22390646,
            22389049,
            22390124,
            22390855,
            22389294,
            22389348,
            22387670,
            22389288,
            22389074,
            22389115,
            22388833,
            22388109,
            22388606,
            22388375,
            22388424,
            22388509,
            22389052,
            22389324,
            22390050,
            22387662,
            22388291,
            22388672,
            22388826,
            22388827,
            22388970,
            22389161,
            22389239,
            22389838,
            22390794,
            22388481,
            22387959,
            22389835,
            22387573,
            22391018,
            22389050,
            22387933,
            22388263,
            22390533,
            22391022,
            22387642,
            22387801,
            22388275,
            22389218,
            22390931,
            22388572,
            22390597,
            22388644,
            22389283,
            22390569,
            22390344,
            22388534,
            22391037,
            22387445,
            22388130,
            22388293,
            22388353,
            22388993,
            22389213,
            22389319,
            22389797,
            22390022,
            22390354,
            22390440,
            22390470,
            22388290,
            22389083,
            22389792,
            22389834,
            22390435,
            22390730,
            22389540,
            22390974,
            22388813,
            22388817,
            22390926,
            22389212,
            22388087,
            22390183,
            22390227,
            22390760,
            22388902,
            22389075,
            22390511,
            22391096,
            22388044,
            22389006,
            22389702,
            22390085,
            22390915,
            22388441,
            22388565,
            22388612,
            22389178,
            22390461,
            22389048,
            22389151,
            22389245,
            22389439,
            22390619,
            22390959,
            22389860,
            22387561,
            22390841,
            22387697,
            22387987,
            22388858,
            22388867,
            22389357,
            22389489,
            22389498,
            22389541,
            22390029,
            22390895,
            22388596,
            22391099,
            22389777,
            22390383,
            22389282,
            22389416,
            22388527,
            22388962,
            22389344,
            22389918,
            22390367,
            22390400,
            22390543,
            22390556,
            22387442,
            22389668,
            22387840,
            22387957,
            22388511,
            22388575,
            22389444,
            22389649,
            22390079,
            22390252,
            22390257,
            22390318,
            22390433,
            22390891,
            22390899,
            22390988,
            22391021,
            22387609,
            22387960,
            22388048,
            22388123,
            22388140,
            22388343,
            22388805,
            22388927,
            22388997,
            22389018,
            22390032,
            22390237,
            22390598,
            22389563,
            22387518,
            22390924,
            22389818,
            22390809,
            22387616,
            22388115,
            22388865,
            22388901,
            22388551,
            22389793,
            22389657,
            22387860,
            22388097,
            22388468,
            22389278,
            22389309,
            22389434,
            22389443,
            22389764,
            22389871,
            22389964,
            22390091,
            22390381,
            22391024,
            22388871,
            22390071,
            22390118,
            22390582,
            22390812,
            22387891,
            22390345,
            22388215,
            22388590,
            22387649,
            22387836,
            22388390,
            22388472,
            22388592,
            22388866,
            22389636,
            22390765,
            22390863,
            22390695,
            22390811,
            22391060,
            22390053,
            22390356,
            22388297,
            22388967,
            22389144,
            22390070,
            22390407,
            22388304,
            22390154,
            22389394,
            22389986,
            22390920,
            22388451,
            22390573,
            22388908,
            22389165,
            22389226,
            22389333,
            22389824,
            22390969,
            22388014,
            22389027,
            22389715,
            22387903,
            22390692,
            22388952,
            22389684,
            22388392,
            22387948,
            22390090,
            22390165,
            22387583,
            22388188,
            22389258,
            22388517,
            22388704,
            22388393,
            22389410,
            22388508,
            22390000,
            22390806,
            22390312,
            22388660,
            22391086,
            22388911,
            22388371,
            22389184,
            22388784,
            22387376,
            22389172,
            22389716,
            22387889,
            22387984,
            22388079,
            22388101,
            22388181,
            22388324,
            22388368,
            22388458,
            22388497,
            22388549,
            22388574,
            22388721,
            22388892,
            22388914,
            22388917,
            22388923,
            22389139,
            22389378,
            22389433,
            22389580,
            22389709,
            22390115,
            22390272,
            22390410,
            22390417,
            22390437,
            22390880,
            22390885,
            22390927,
            22387436,
            22388306,
            22388645,
            22389129,
            22389201,
            22389391,
            22391016,
            22388067,
            22388499,
            22388885,
            22388972,
            22389234,
            22389264,
            22389723,
            22390217,
            22387730,
            22388789,
            22389244,
            22389572,
            22389968,
            22390211,
            22387691,
            22388356,
            22388581,
            22388747,
            22389366,
            22389450,
            22387945,
            22388018,
            22388449,
            22390447,
            22390954,
            22389270,
            22388714,
            22390848,
            22388544,
            22389543,
            22390838,
            22387541,
            22387998,
            22388119,
            22388280,
            22389123,
            22389497,
            22390825,
            22387604,
            22388783,
            22391082,
            22388774,
            22388219,
            22389053,
            22389851,
            22390896,
            22388056,
            22388120,
            22388126,
            22388459,
            22388829,
            22389419,
            22389492,
            22389495,
            22389548,
            22389845,
            22390304,
            22390748,
            22390977,
            22387947,
            22388307,
            22388440,
            22388651,
            22389267,
            22389224,
            22389502,
            22389593,
            22389880,
            22387850,
            22388026,
            22390196,
            22390507,
            22389490,
            22387553,
            22387795,
            22388627,
            22388650,
            22389362,
            22389564,
            22389610,
            22389714,
            22389998,
            22390570,
            22387964,
            22388380,
            22390075,
            22389473,
            22389671,
            22389800,
            22390450,
            22390743,
            22388311,
            22388677,
            22388931,
            22388942,
            22389118,
            22389675,
            22389711,
            22389765,
            22390004,
            22390174,
            22390180,
            22390458,
            22390911,
            22390940,
            22390346,
            22388881,
            22388888,
            22389023,
            22390319,
            22390386,
            22389558,
            22389071,
            22389696,
            22390446,
            22389010,
            22387426,
            22389163,
            22389223,
            22389331,
            22389337,
            22389424,
            22390063,
            22390879,
            22389994,
            22389047,
            22387460,
            22389057,
            22389983,
            22387625,
            22390014,
            22389329,
            22388231,
            22388943,
            22389046,
            22389893,
            22389402,
            22387478,
            22388977,
            22389774,
            22390654,
            22388947,
            22387380,
            22390374,
            22389686,
            22389216,
            22389431,
            22388303,
            22389807,
            22389061,
            22389906,
            22391087,
            22389413,
            22389697,
            22390560,
            22389463,
            22389637,
            22390540,
            22389801,
            22389070,
            22390491,
            22389266,
            22389327,
            22390793,
            22388463,
            22389370,
            22390160,
            22389461,
            22390268,
            22390644,
            22388234,
            22388327,
            22389780,
            22389681,
            22388698,
            22387388,
            22387457,
            22390308,
            22388217,
            22390259,
            22390998,
            22388851,
            22388989,
            22390087,
            22390457,
            22390746,
            22387733,
            22388153,
            22388854,
            22388915,
            22388968,
            22389742,
            22388634,
            22388659,
            22388994,
            22390618,
            22388937,
            22388648,
            22389330,
            22390807,
            22387693,
            22387926,
            22390702,
            22388278,
            22388386,
            22387920,
            22388656,
            22389407,
            22389997,
            22388563,
            22388394,
            22390373,
            22387866,
            22389280,
            22387892,
            22389427,
            22390033,
            22389422,
            22388201,
            22388843,
            22389788,
            22388613,
            22389298,
            22389300,
            22390588,
            22388302,
            22388519,
            22388616,
            22388996,
            22388998,
            22389230,
            22390001,
            22391102,
            22388701,
            22389733,
            22390559,
            22388450,
            22389340
        );
    }
}
$exchanger = new QueryExchangeDetail();
$exchanger->getOrderDetailPoint();